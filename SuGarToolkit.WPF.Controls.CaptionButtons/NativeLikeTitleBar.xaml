<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:SuGarToolkit.WPF.Controls.CaptionButtons">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/SuGarToolkit.WPF.Controls.CaptionButtons;component/CaptionButtonBar_themeresource.xaml" />
        <ResourceDictionary Source="/SuGarToolkit.WPF.Controls.CaptionButtons;component/NativeLikeTitleBar_themeresource.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <Style TargetType="{x:Type local:NativeLikeTitleBar}">
        <Setter Property="MinHeight" Value="{StaticResource CaptionStandardHeight}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:NativeLikeTitleBar}">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <Grid Grid.Column="0" HorizontalAlignment="Left">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto" />
                                    <!--  BackButton  -->
                                    <ColumnDefinition Width="auto" />
                                    <!--  PaneToggleButton / MenuButton  -->
                                    <ColumnDefinition Width="*" />
                                    <!--  CustomHeaderContent  -->
                                </Grid.ColumnDefinitions>

                                <local:CaptionButton
                                    Grid.Column="0"
                                    Width="46"
                                    VerticalAlignment="Stretch"
                                    IsEnabled="{TemplateBinding IsBackButtonEnabled}"
                                    Visibility="{TemplateBinding BackButtonVisibility}"
                                    WindowChrome.IsHitTestVisibleInChrome="True">
                                    <local:FontIcon FontSize="12" Glyph="&#xE72B;" />
                                </local:CaptionButton>

                                <local:CaptionButton
                                    Grid.Column="1"
                                    Width="46"
                                    VerticalAlignment="Stretch"
                                    IsEnabled="{TemplateBinding IsPaneToggleButtonEnabled}"
                                    Visibility="{TemplateBinding PaneToggleButtonVisibility}"
                                    WindowChrome.IsHitTestVisibleInChrome="True">
                                    <local:FontIcon FontSize="13" Glyph="&#xE700;" />
                                </local:CaptionButton>

                                <ContentControl Grid.Column="2" Content="{TemplateBinding CustomHeader}" />
                            </Grid>

                            <ContentPresenter
                                Grid.Column="1"
                                HorizontalAlignment="Center"
                                Content="{TemplateBinding Content}"
                                ContentTemplate="{TemplateBinding ContentTemplate}"
                                ContentTemplateSelector="{TemplateBinding ContentTemplateSelector}" />

                            <Grid Grid.Column="2" HorizontalAlignment="Right">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="auto" />
                                </Grid.ColumnDefinitions>

                                <ContentControl
                                    Grid.Column="0"
                                    HorizontalAlignment="Right"
                                    Content="{TemplateBinding CustomFooter}" />

                                <local:CaptionButtonBar
                                    Grid.Column="1"
                                    MinHeight="0"
                                    CloseButtonVisibility="{TemplateBinding CloseButtonVisibility}"
                                    Focusable="False"
                                    IsCloseButtonEnabled="{TemplateBinding IsCloseButtonEnabled}"
                                    IsMaximizeButtonEnabled="{TemplateBinding IsMaximizeButtonEnabled}"
                                    IsMinimizeButtonEnabled="{TemplateBinding IsMinimizeButtonEnabled}"
                                    MaximizeButtonVisibility="{TemplateBinding MaximizeButtonVisibility}"
                                    MinimizeButtonVisibility="{TemplateBinding MinimizeButtonVisibility}" />
                            </Grid>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>